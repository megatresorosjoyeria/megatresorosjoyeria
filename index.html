<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mega Tres Oros Joyería - Compra y Recompra de Oro en Quito</title>
    <meta name="description" content="Vende tu oro al mejor precio en Quito con Mega Tres Oros Joyería. Ofrecemos recompra rápida, transacciones seguras y dinero en tus manos en 5 minutos.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        /* ... (Estilos CSS sin cambios) ... */
    </style>
</head>
<body>
    <header class="hero">
   <img style="max-width:190px;" src="https://i.ibb.co/2F5dcVT/3oroslogo.jpg">
        <h1>Compramos tus Joyas Usadas Al Mejor Precio Por Gramo de Oro en Quito – ¡Dinero en Tus Manos en 5 Minutos!</h1>
        <p>Mega Tres Oros Joyería: Confianza, Transparencia y Facilidad en Cada Transacción.</p>
        <a href="#formulario" class="btn">¡Quiero Mi Cotización!</a>
    </header>

    <section id="precios" class="benefits">
        <h2>¿Por Qué Elegir Mega Tres Oros Joyería?</h2>
        <div class="benefits-grid">
            <div class="benefit-item">
                <span class="fas fa-hand-holding-usd"></span>
                <h3>Precios Competitivos</h3>
                <p>Te garantizamos el mejor precio del mercado por tu oro.</p>
            </div>
            <div class="benefit-item">
                <span class="fas fa-shield-alt"></span>
                <h3>Recompra Segura y Sin Complicaciones</h3>
                <p>Si deseas recomprar tus joyas te ofrecemos un plan transparente y confiable.</p>
            </div>
            <div class="benefit-item">
                <span class="fas fa-money-check-alt"></span>
                <h3>Dinero en Efectivo o Transferencia Inmediata en minutos</h3>
                <p>Recibe tu dinero al instante, como tú prefieras.</p>
            </div>
        </div>
    </section>

    <section id="formulario" class="form-section">
        <div class="form-container">
            <h3>Vende Tu Oro Ahora</h3>
            <form id="leadForm" action="https://script.google.com/macros/s/AKfycbwdhXFtrcZPhYBX_kJl35Njwncpoi8RcmUPJzyWUfQLZETmKiAOql6MC0zqQB3ybjoucA/exec" method="POST">
    <input type="hidden" id="landingurl" name="landingurl" value="">
    <label for="nombre">Nombre Completo:</label>
    <input type="text" id="nombre" name="nombre" required placeholder="Tu nombre completo">
    <div id="nombre-error" class="error-message">Introduce tu nombre completo (nombre y apellido).</div>

    <label for="whatsapp">WhatsApp:</label>
    <input type="tel" id="whatsapp" name="whatsapp" required placeholder="Ej: 593999999999" value="593">
    <div id="whatsapp-error" class="error-message">Introduce un número de WhatsApp válido (mínimo 12 dígitos, incluyendo el código de país).</div>

    <label for="detalles">Detalles de la Cotización:</label>
    <textarea id="detalles" name="detalles" rows="4" placeholder="Ejemplo: Peso del oro, tipo de joya, etc."></textarea>

    <p style="font-size: 0.9em;">Estamos ubicados en Av. de los Shyris &, Quito 170102, Ecuador. Por favor, dinos qué día y hora te gustaría visitarnos para una cotización.</p>
    <label for="cita">Fecha y Hora Preferible de Cita: (Opcional)</label>
    
    <input type="text" id="cita" name="cita" placeholder="Ej: Lunes 10 a.m.">

    <div class="error-summary">
        <p>Por favor, revisa los siguientes campos:</p>
        <ul></ul>
    </div>
    <button type="submit" class="btn">Solicitar Cotización</button>
</form>
        </div>
    </section>

    <section class="how-it-works">
        <h2>Cómo Funciona</h2>
        <div class="steps">
            <div class="step">
                <div class="step-number">1</div>
                <p>Lleva tus joyas a nuestra tienda en Quito.</p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <p>Valuamos tu oro en minutos con total transparencia.</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <p>Recibe tu dinero al instante, en efectivo o transferencia.</p>
            </div>
        </div>
        <a href="#formulario" class="btn">Visítanos Hoy</a>
    </section>
    <section class="testimonials">
        <img src="https://i.ibb.co/RN1VCP2/joyasuasadastresoros.jpg" style="max-width:90%;">
        <h2>Testimonios de Clientes Satisfechos</h2>
        <div class="testimonial">
            <p class="testimonial-content">"Vendí mis joyas de oro en Mega Tres Oros y quedé muy impresionado con el servicio. El proceso fue rápido, el precio fue justo y el personal fue muy amable. ¡Los recomiendo ampliamente!"</p>
            <p class="testimonial-author">- Juan Pérez</p>
        </div>
        <div class="testimonial">
            <p class="testimonial-content">"Necesitaba dinero rápido y decidí vender algunas joyas que ya no usaba. Mega Tres Oros me ofreció una excelente cotización y me pagaron en efectivo en el momento. ¡Excelente servicio!"</p>
            <p class="testimonial-author">- María González</p>
        </div>
        <div class="testimonial">
            <p class="testimonial-content">"Compra de oro a precio Justo. Tramites fácil para recuperar las joyas, aros de matrimonio y anillo de compromiso, compran plata y relojes. Excelente atención"</p>
            <p class="testimonial-author">- Carlos Alvarez Alvarez</p>
        </div>
        <div class="testimonial">
            <p class="testimonial-content">"Excelente atención!"</p>
            <p class="testimonial-author">- Paulina Patiño Montaño</p>
        </div>
    </section>

    <section id="ubicacion" class="location">
        <h2>Visítanos</h2>
        <p>Estamos ubicados en el corazón de Quito, Ecuador.</p>
        <div class="map-container" id="map">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d498.7250785137459!2d-78.47980855029864!3d-0.1706288870272786!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91d59b004f883043%3A0xf9c3de84e92f6076!2sMega%20Tres%20Oros%20Joyer%C3%ADa!5e0!3m2!1ses!2sar!4v1736364162244!5m2!1ses!2sar" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>    </div>
        <p>Av. de los Shyris &, Quito 170102, Ecuador</p>
     
    </section>

    <footer>
       <a href="#formulario" class="btn">¡Quiero Mi Cotización!</a> 
        <div class="footer-info">
            <p>Mega Tres Oros Joyería</p>
            <p>Dirección: Av. de los Shyris &, Quito 170102, Ecuador</p>
            <p>Teléfono: <a href="tel:+593995190080">+593 99519 0080</a></p>
                      <details class="schedule">
                <summary>Horario de Atención</summary>
                <ul>
                    <li>Martes: 8:30 a. m. – 6:30 p. m.</li>
                    <li>Miércoles: 8:30 a. m. – 6:30 p. m.</li>
                    <li>Jueves: 8:30 a. m. – 6:30 p. m.</li>
                    <li>Viernes: 8:30 a. m. – 6:30 p. m.</li>
                    <li>Sábado: 9 a. m. – 2 p. m.</li>
                    <li>Domingo: Cerrado</li>
                    <li>Lunes: 8:30 a. m. – 6:30 p. m.</li>
                </ul>
            </details>
            <p>© 2025 Mega Tres Oros Joyería. Todos los derechos reservados.</p>
        </div>
    </footer>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        jQuery('#landingurl').val(window.location.href);
    });

    jQuery('#leadForm').on('submit', async function(event) {
        event.preventDefault();

        let isValid = true;
        const errorSummaryList = jQuery('.error-summary ul');
        errorSummaryList.empty();
        jQuery('.error-summary').hide();

        // Validación del nombre completo
        const nombre = jQuery('#nombre').val();
        const nombreError = jQuery('#nombre-error');
        if (nombre.trim().split(/\s+/).length < 2) {
            nombreError.show();
            jQuery('#nombre').addClass('error');
            isValid = false;
            addErrorToSummary('Nombre completo (nombre y apellido).');
        } else {
            nombreError.hide();
            jQuery('#nombre').removeClass('error');
        }

        // Validación del número de WhatsApp
        const whatsapp = jQuery('#whatsapp').val();
        const whatsappError = jQuery('#whatsapp-error');
        if (whatsapp.length < 12 || !/^\d+$/.test(whatsapp)) {
            whatsappError.show();
            jQuery('#whatsapp').addClass('error');
            isValid = false;
            addErrorToSummary('Número de WhatsApp válido (mínimo 12 dígitos).');
        } else {
            whatsappError.hide();
            jQuery('#whatsapp').removeClass('error');
        }

        // Si hay errores, mostrar el resumen
        if (!isValid) {
            console.log("Form validation failed");
            jQuery('.error-summary').show();
        } else {
            // Enviar datos a la aplicación web usando AJAX y jQuery
            const formData = new FormData(this);
            const formObject = {};
            formData.forEach((value, key) => {
                formObject[key] = value;
            });

            console.log("Datos del formulario a enviar:", formObject);

            try {
                const response = await jQuery.ajax({
                    url: "https://script.google.com/macros/s/AKfycbwdhXFtrcZPhYBX_kJl35Njwncpoi8RcmUPJzyWUfQLZETmKiAOql6MC0zqQB3ybjoucA/exec",
                    method: "POST",
                    dataType: "json",
                    data: formObject,
                });

                console.log('Respuesta del servidor:', response);
                if (response.result === 'success') {
                    // Generar el mensaje de WhatsApp
                    const whatsappMessage = `Hola, quisiera confirmar mi cotización:%0A`;
                    whatsappMessage += `*Nombre:* ${encodeURIComponent(formObject.nombre)}%0A`;
                    whatsappMessage += `*Cotización:* ${encodeURIComponent(formObject.detalles)}%0A`;
                    if (formObject.cita) {
                        whatsappMessage += `*Día y hora preferible de cita:* ${encodeURIComponent(formObject.cita)}%0A`;
                    }
                    const whatsappLink = `https://wa.me/593995190080?text=${whatsappMessage}`;
                    
                    
                    jQuery('#whatsapp-link').attr('href', whatsappLink);
                    jQuery('#form_19_submit').hide();
                     // Abrir WhatsApp en una nueva pestaña después de 2 segundos
                    setTimeout(function () {
                        window.open(whatsappLink, '_blank');
                    }, 2000);

                    // Limpiar los campos luego de enviar el mensaje
                    jQuery('#leadForm')[0].reset();
                } else {
                    console.error('Error en la respuesta del servidor:', response.message);
                    jQuery('#error-step12').text('Error al enviar la cotización. Por favor, inténtalo de nuevo.');
                }
            } catch (error) {
                console.error('Error en la petición AJAX:', error);
                jQuery('#error-step12').text('Error enviando datos. Por favor intenta nuevamente.');
            }
        }

        function addErrorToSummary(errorMessage) {
            console.log("Adding error to summary:", errorMessage);
            const listItem = jQuery('<li></li>').text(errorMessage);
            errorSummaryList.append(listItem);
        }
    });
</script>

</body>
</html>
